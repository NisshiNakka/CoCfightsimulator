<div class="container my-5">
  <h2 class="text-center mb-5 fw-bold"><%= t('.title') %></h2>

  <div class="row g-4">
    <div class="col-md-6">
      <div class="card border-danger shadow-sm h-100 bg-danger-subtle">
        <div class="card-body p-4">
          <h3 class="h4 fw-bold text-danger mb-4 text-center"><%= t('.enemy_character') %></h3>
          
          <div class="mb-4">
            <%= form_with url: new_simulations_path, method: :get, data: { turbo: true } do |f| %>
              <%= f.collection_select :enemy_id, @all_characters, :id, :name,
                    { include_blank: t('.not_select'), selected: session[:enemy_id] },
                    { class: "form-select border-danger", onchange: "this.form.requestSubmit()" } %>
            <% end %>
          </div>

          <div id="enemy_display">
            <div class="bg-white rounded p-3 border" style="min-height: 250px;">
              <% if @enemy_character %>
                <%= render "shared/character_card", character: @enemy_character %>
              <% else %>
                <div class="d-flex flex-column align-items-center justify-content-center text-secondary h-100 opacity-75" style="min-height: 200px;">
                  <i class="bi bi-person-plus fs-1 mb-2"></i>
                  <p class="mb-0"><%= t('.select_character_instruction') %></p>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card border-primary shadow-sm h-100 bg-primary-subtle">
        <div class="card-body p-4">
          <h3 class="h4 fw-bold text-primary mb-4 text-center"><%= t('.ally_character') %></h3>
          
          <div class="mb-4">
            <%= form_with url: new_simulations_path, method: :get, data: { turbo: true } do |f| %>
              <%= f.collection_select :ally_id, @all_characters, :id, :name,
                    { include_blank: t('.not_select'), selected: session[:ally_id] }, 
                    { class: "form-select border-primary", onchange: "this.form.requestSubmit()" } %>
            <% end %>
          </div>

          <div id="ally_display">
            <div class="bg-white rounded p-3 border" style="min-height: 250px;">
              <% if @ally_character %>
                <%= render "shared/character_card", character: @ally_character %>
              <% else %>
                <div class="d-flex flex-column align-items-center justify-content-center text-secondary h-100 opacity-75" style="min-height: 200px;">
                  <i class="bi bi-person-plus fs-1 mb-2"></i>
                  <p class="mb-0"><%= t('.select_character_instruction') %></p>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="dice_roll_area"> 
    <%= render "start_simulation" %>
  </div>
</div>
